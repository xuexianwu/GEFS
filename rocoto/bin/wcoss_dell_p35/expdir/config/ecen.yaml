# This file is used to generate config.ecen, which would be used to
# control ensemble recentering.  The scripts and code for that are not
# part of this public release, so this file is ignored.

config_ecen:
  filename: config.ecen
  content: !expand |
    #!/bin/ksh -x
    
    # This file is automatically generated from the YAML-based system
    # in ecf/ecfutils/.  Any changes will be overwritten if
    # setup_case.sh is rerun.
    
    ########## config.ecen ##########
    # Ensemble recentering specific
    
    echo "BEGIN: config.ecen"

    export npe_ecen="{doc.partition_common.resources.run_ecen[0].mpi_ranks}"
    export npe_node_ecen="{doc.partition_common.resources.run_ecen[0].max_ppn}"
    export nth_ecen="{doc.partition_common.resources.run_ecen[0].OMP_NUM_THREADS}"
    if [[ "$machine" = "WCOSS_DELL_P3" ]]; then
        export nth_ecen=7
    fi
    export nth_cycle=$nth_ecen
    if [[ "$machine" == "WCOSS_C" ]]; then
        export memory_ecen="3072M"
    elif [[ "$machine" == "GAEA" ]]; then
        export memory_ecen="3072M"
    fi
    
    export ENKFRECENSH="$HOMEgsi/scripts/exglobal_enkf_recenter_fv3gfs.sh.ecf"

    export CHGRESEXEC="$HOMEgfs/exec/chgres_recenter.exe"
    
    echo "END: config.ecen"
    
