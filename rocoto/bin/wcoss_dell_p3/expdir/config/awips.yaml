# This file is used to generate config.awips, which has settings for the GFS awips step

config_awips:
  filename: config.awips
  content: !expand |
    #!/bin/ksh -x
    
    # This file is automatically generated from the YAML-based system
    # in ecf/ecfutils/.  Any changes will be overwritten if
    # setup_case.sh is rerun.
    
    ########## config.awips ##########
    # GFS awips step specific

    echo "BEGIN: config.awips"

    export npe_awips="{doc.partition_common.resources.run_awips[0].mpi_ranks}"
    export npe_node_awips="{doc.partition_common.resources.run_awips[0].max_ppn}"
    export nth_awips=2
    if [[ "$machine" == "WCOSS_DELL_P3" ]]; then
        export npe_awips=2
        export npe_node_awips=2
        export nth_awips=1
    fi
    if [[ "$machine" == "WCOSS_C" ]]; then
        export memory_awips="2048M"
    fi

    export SENDCOM="YES"

    export AWIPS20SH=$HOMEgfs/jobs/JGFS_AWIPS_20KM_1P0DEG
    export AWIPSG2SH=$HOMEgfs/jobs/JGFS_AWIPS_G2

    export COMIN="$ROTDIR/$CDUMP.$PDY/$cyc"
    export COMOUT="$ROTDIR/$CDUMP.$PDY/$cyc"
    export COMOUTwmo="$COMOUT/wmo"
    export PCOM="$COMOUT/wmo"

    # No. of concurrent awips jobs
    export NAWIPSGRP={doc.settings.NAWIPSGRP}

    echo "END: config.awips"
